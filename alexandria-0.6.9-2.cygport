inherit ruby

CATEGORY="Gnome"
SUMMARY="GNOME book collection manager"
DESCRIPTION="Alexandria is a GNOME application to help you manage your
book collection."
HOMEPAGE="http://alexandria.rubyforge.org/"
SRC_URI="mirror://rubyforge/${PN}/${P}.tar.gz"

PATCH_URI="
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.6-dont_use_thread_when_adding_file_by_isdn.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-always-require-rubygems.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-rbconfig.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-ascii-fix.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-kcodefix.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-evalfix.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-z3950-next.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-utf8-convert.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-export-to-HTML-with-ruby19.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-export-to-CSV-bintex-with-ruby19.patch
http://pkgs.fedoraproject.org/cgit/${PN}.git/plain/${PN}-0.6.8-iconview-multibyte.patch
"

src_install() {
	cd ${B}
	DESTDIR=${D} PREFIX=/usr RUBYLIBDIR=${RUBY_VENDORLIB} \
	rake install_package_staging || error "rake install failed"

	dodir /etc/gconf/schemas
	mv ${D}/usr/share/gconf/schemas/* ${D}/etc/gconf/schemas/
}
